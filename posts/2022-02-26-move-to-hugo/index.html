<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="With this post, I can say that I have successfully completed moving my website from GatsbyJS to Hugo and in the process did some neat things with it."><title>Moved to Hugo from Gatsby</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://garden.whitsitt.org//icon.png><link href=https://garden.whitsitt.org/styles.3c5381e2340dbc225326b1bd534cb00a.min.css rel=stylesheet><link href=https://garden.whitsitt.org/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://garden.whitsitt.org/js/darkmode.6550d0f410f0a37e033e077bd387ded7.min.js></script>
<script src=https://garden.whitsitt.org/js/util.6f22941e242efae60fd84e7c32e874fa.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script async src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script async src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script async src=https://garden.whitsitt.org/js/popover.f03552ccb84d99ca615d1cfb9abde59e.min.js></script>
<script defer src=https://garden.whitsitt.org/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://garden.whitsitt.org/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://garden.whitsitt.org/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://garden.whitsitt.org/",fetchData=Promise.all([fetch("https://garden.whitsitt.org/indices/linkIndex.10fc34abf72c9733d706bde364c1a09d.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://garden.whitsitt.org/indices/contentIndex.d57f1c616e494595e81f0ae298c39913.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://garden.whitsitt.org",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://garden.whitsitt.org",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/garden.whitsitt.org\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://garden.whitsitt.org/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://garden.whitsitt.org/>ðŸª´ (jw) Joe Whitsitt</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Moved to Hugo from Gatsby</h1><p class=meta>Last updated
Feb 26, 2022
<a href=https://github.com/whitsitt/joe/tree/hugo/content/posts/2022-02-26-move-to-hugo.md rel=noopener>Edit Source</a></p><picture class="featured-image flex w-full h-1/6 max-h-[60vh]"><source sizes="(min-width: 720px) 720px, 100vw" srcset="/images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_360x0_resize_q75_h2_box.webp 360w, /images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_720x0_resize_q75_h2_box.webp 720w, /images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_1440x0_resize_q75_h2_box.webp 1440w" type=image/webp><source srcset="/images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_360x0_resize_q80_box.jpg 360w, /images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_720x0_resize_q80_box.jpg 720w, /images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_1440x0_resize_q80_box.jpg 1440w" type=image/jpeg><img class="object-cover w-full rounded" src=/images/francesco-mazzoli-0xh3QPqcfKM-unsplash_hu3d03a01dcc18bc5be0e67db3d8d209a6_2471678_360x0_resize_q80_box.jpg alt role=presentation width=360 height=240></picture><ul class=tags><li><a href=https://garden.whitsitt.org/tags/hugo/>Hugo</a></li><li><a href=https://garden.whitsitt.org/tags/tailwindcss/>Tailwindcss</a></li><li><a href=https://garden.whitsitt.org/tags/gitlab/>Gitlab</a></li><li><a href=https://garden.whitsitt.org/tags/webp/>Webp</a></li><li><a href=https://garden.whitsitt.org/tags/google-lighthouse/>Google lighthouse</a></li><li><a href=https://garden.whitsitt.org/tags/netlify/>Netlify</a></li><li><a href=https://garden.whitsitt.org/tags/netlifycms/>Netlifycms</a></li><li><a href=https://garden.whitsitt.org/tags/svg-icons/>Svg icons</a></li><li><a href=https://garden.whitsitt.org/tags/npm/>Npm</a></li><li><a href=https://garden.whitsitt.org/tags/node/>Node</a></li></ul><p>With this post, I can say that I have successfully completed moving my website from
<a href=https://www.gatsbyjs.com/ rel=noopener>GatsbyJS</a> to
<a href=https://gohugo.io/ rel=noopener>Hugo</a> and in the process did some neat things with it.</p><p>First off, a quick note about why Gatsby wasn&rsquo;t quite right for this website.
<a href=/posts/hello-gatsby/ rel=noopener class=internal-link data-src=/posts/hello-gatsby/>The last move was from Jekyll to Gatsby</a> and a lot of what originally drove that transition was getting away from Ruby and starting to investigate decoupled websites as it related to Drupal which I use for work. Well, though I got away from Ruby when it came to this website, I still maintain other Jekyll sites and old Drupal themes built on top of Ruby, so it is still a part of my life. When it came to investigating decoupled websites, I learned that I shouldn&rsquo;t bring my work home. At least for the short term, that kind of work and investigation has been postponed at work and without the need at home, I wasn&rsquo;t motivated to dive into it on my own time. Gatsby is a very versatile tool, but this website doesn&rsquo;t need all of that.</p><p>As for why I chose to move to Hugo, a lot of it is based on Hugo&rsquo;s out-of-the-box nature. I have previous experience getting started with with a Hugo site and the functionality I have come to expect for a blog is already there waiting to be wired up with a couple template snippets. With that said, Hugo only goes so far and I am sure there will be a time when it doesn&rsquo;t go far enough for my liking. Finally, I want to note that the blend of templating, raw HTML/JS and markdown in Hugo is similar to Jekyll and something I prefer over the <code>dangerouslySetInnerHTML</code> and GraphQL type stuff of Gatsby.</p><p>Originally, my thought was just to move things over as fast as I could with a starter theme and then revisit everything down the road but I convinced myself to slow down a bit and approach it how I originally approached Jekyll by building from the ground up. This helped me learn about what Hugo was doing and how to make it do what I wanted it to do.</p><p>A big part of the work was cleaning up my old content. Fixing markdown, replacing image markup with a Hugo shortcode, making front matter consistent and accounting for the path changes using Hugo&rsquo;s redirect functionality.</p><p>Part of what I wanted to do was to create a theme of my own that didn&rsquo;t have a lot of dependencies, that was easy to update from anywhere and that could score a high, if not perfect,
<a href=https://developers.google.com/web/tools/lighthouse/ rel=noopener>Google Lighthouse</a> score. I do want to mention that I heavily referenced the
<a href=https://github.com/opera7133/Blonde rel=noopener>Blonde</a> theme before I started down my own path. The Blonde theme does a lot of great things, but things I did not need. It was the Blonde theme that did inspire me to use TailwindCSS which I had not used before.</p><p>I could implement
<a href=https://tailwindcss.com/ rel=noopener>TailwindCSS</a> with the help of
<a href=https://gohugo.io/hugo-pipes/introduction/ rel=noopener>Hugo Pipes</a> to compile only what I had styled and none of the extras of the framework that was not needed. This was a big change from my days of Bootstrap where a minified but base styles were loaded everywhere to support the one-off styles I might implement. I have it watching both my theme and my content directories so it only builds the styles based on the classes used. It also removes any styles for the classes I no longer use. I still have an override CSS file available to do this and that, but my overall style footprint is tiny. At the time of writing this, I think my CSS file compressed and minified is only 21 KB.</p><p>To get a solid Lighthouse score you also need to do a lot with your images. Thankfully, Hugo has WebP image processing support now. Instead of creating my own versions locally, I can add a JPEG image to a post front matter and/or somewhere in the post body (using a shortcode) Hugo generates different size/type images for different viewport sizes. This is a huge time saver for me and reduces the need to draft posts on a computer with image processing software. All of this ends up in resources directory which I am tracking in the repository. Later on I plan look into other solutions for asset storage.</p><div class="bg-zinc-100 p-5 w-full border-l-8 border-zinc-500"><div class=text-zinc-900><p class=font-bold>Note about Lighthouse scores</p><p class="leading-tight text-sm">I am not going to pretend to understand the all of the scoring, but it seems like you have trigger it under very specific conditions. In one run, my scores are perfect, in another I come up just short because I am being <em>too lazy</em> with my image loading that I am now affecting my first contentful paint (FCP) or whatever. That kind of crazy logic tells me to move my blog listing "below the fold" which I thought was no longer a thing.</p></div></div></div><p>Between style compilation and image processing, it makes it possible to make updates from anywhere, not just where I have Hugo installed. So, this time around, I have moved this website&rsquo;s repo to a private repository on
<a href=https://gitlab.com/joewhitsitt rel=noopener>GitLab</a> and then have
<a href=https://netlify.com/ rel=noopener>Netlify</a> build and serve it. Though Gitlab pages works just fine, I am using Netlify because of their free form support in order to maintain a contact form on the website. By going with a private repository, I can leverage Hugo&rsquo;s draft functionality to create posts without them being published and visible right away.</p><p>Finally, a lot of these improvements also made it possible to write from anywhere. I can now manage my website from GitLab and Netlify without having to maintain a local environment on my computer. To go a step further, I setup
<a href=https://www.netlifycms.org/ rel=noopener>NetlifyCMS</a> so I can work with content in a nice content management system (CMS) interface. Between that and Gitlab&rsquo;s web interface, I could probably do away with my local environment.</p><p>Ultimately, I just hope to write more now that a lot of the barriers have been removed. I do plan to make more adjustments to the website (as always), but with 100s across the board on Lighthouse at the moment (When I run it, not when you run it of course), I am going to sit-back and enjoy it for a bit.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script async src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://garden.whitsitt.org/js/graph.2d9e48dbe7ea47c0ef1c58296ce14448.js></script></div></div><div id=contact_buttons><footer><p>Made by Joe Whitsitt using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2023</p><ul><li><a href=https://garden.whitsitt.org/>Home</a></li><li><a href=https://twitter.com/joewhitsitt>Twitter</a></li><li><a href=https://github.com/joewhitsitt>GitHub</a></li></ul></footer></div></div></body></html>